<div class="checkout-payment-container">
  <div class="payment-header">
    <h3>Complete Your Sponsorship</h3>
    <p class="company-name">{{ companyName }}</p>
  </div>

  <!-- Benefits Summary -->
  <div class="benefits-summary" *ngIf="benefits.length > 0">
    <h4>Selected Benefits</h4>
    <div class="benefit-item" *ngFor="let benefit of benefits">
      <div class="benefit-name">{{ benefit.name }}</div>
      <div class="benefit-price">Â£{{ benefit.currency | number:'1.2-2' }}</div>
    </div>
    <div class="total-amount">
      <strong>Total: Â£{{ totalAmount | number:'1.2-2' }}</strong>
    </div>
  </div>

  <!-- Payment Form -->
  <form (ngSubmit)="processPayment()" #paymentForm="ngForm" class="payment-form">
    <div class="form-section">
      <h4>Card Information</h4>
      
      <div class="form-group">
        <label for="cardNumber">Card Number</label>
        <input 
          type="text" 
          id="cardNumber"
          name="cardNumber"
          [(ngModel)]="paymentData.cardNumber"
          (input)="formatCardNumber($event)"
          placeholder="1234 5678 9012 3456"
          maxlength="19"
          required>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="expiryMonth">Expiry Month</label>
          <input 
            type="text" 
            id="expiryMonth"
            name="expiryMonth"
            [(ngModel)]="paymentData.expiryMonth"
            (input)="formatExpiry($event, 'expiryMonth')"
            placeholder="MM"
            maxlength="2"
            required>
        </div>

        <div class="form-group">
          <label for="expiryYear">Expiry Year</label>
          <input 
            type="text" 
            id="expiryYear"
            name="expiryYear"
            [(ngModel)]="paymentData.expiryYear"
            (input)="formatExpiry($event, 'expiryYear')"
            placeholder="YY"
            maxlength="2"
            required>
        </div>

        <div class="form-group">
          <label for="cvv">CVV</label>
          <input 
            type="text" 
            id="cvv"
            name="cvv"
            [(ngModel)]="paymentData.cvv"
            placeholder="123"
            maxlength="4"
            required>
        </div>
      </div>

      <div class="form-group">
        <label for="cardholderName">Cardholder Name</label>
        <input 
          type="text" 
          id="cardholderName"
          name="cardholderName"
          [(ngModel)]="paymentData.cardholderName"
          placeholder="John Doe"
          required>
      </div>
    </div>

    <div class="form-section">
      <h4>Billing Address</h4>
      
      <div class="form-group">
        <label for="addressLine1">Address Line 1</label>
        <input 
          type="text" 
          id="addressLine1"
          name="addressLine1"
          [(ngModel)]="paymentData.billingAddress.address_line1"
          placeholder="123 Main Street"
          required>
      </div>

      <div class="form-group">
        <label for="addressLine2">Address Line 2 (Optional)</label>
        <input 
          type="text" 
          id="addressLine2"
          name="addressLine2"
          [(ngModel)]="paymentData.billingAddress.address_line2"
          placeholder="Apartment, suite, etc.">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="city">City</label>
          <input 
            type="text" 
            id="city"
            name="city"
            [(ngModel)]="paymentData.billingAddress.city"
            placeholder="London"
            required>
        </div>

        <div class="form-group">
          <label for="state">State/County</label>
          <input 
            type="text" 
            id="state"
            name="state"
            [(ngModel)]="paymentData.billingAddress.state"
            placeholder="England"
            required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="zip">Postal Code</label>
          <input 
            type="text" 
            id="zip"
            name="zip"
            [(ngModel)]="paymentData.billingAddress.zip"
            placeholder="W1T 4TJ"
            required>
        </div>

        <div class="form-group">
          <label for="country">Country</label>
          <select 
            id="country"
            name="country"
            [(ngModel)]="paymentData.billingAddress.country"
            required>
            <option value="GB">United Kingdom</option>
            <option value="US">United States</option>
            <option value="CA">Canada</option>
            <option value="AU">Australia</option>
            <option value="DE">Germany</option>
            <option value="FR">France</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Error Message -->
    <div class="error-message" *ngIf="error">
      {{ error }}
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <button 
        type="submit" 
        class="pay-button"
        [disabled]="loading || !paymentForm.form.valid">
        <span *ngIf="!loading">Pay Â£{{ totalAmount | number:'1.2-2' }}</span>
        <span *ngIf="loading">Processing...</span>
      </button>
    </div>
  </form>

  <!-- Security Notice -->
  <div class="security-notice">
    <p>
      <i class="security-icon">ðŸ”’</i>
      Your payment information is secure and encrypted. We use Checkout.com for secure payment processing.
    </p>
  </div>
</div> 