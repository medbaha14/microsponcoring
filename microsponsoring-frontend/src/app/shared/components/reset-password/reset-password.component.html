<div class="reset-password-form-card">
  <div *ngIf="validatingToken" class="loading-container">
    <h2>Validating Reset Link</h2>
    <p>Please wait while we validate your reset link...</p>
  </div>

  <form *ngIf="!validatingToken && tokenValid" [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
    <h2>Reset Password</h2>
    <p class="description">Enter your new password below.</p>
    
    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="success" class="success">{{ success }}</div>
    
    <div>
      <label for="newPassword">New Password</label>
      <input id="newPassword" formControlName="newPassword" type="password" placeholder="Enter new password" />
      <div *ngIf="resetPasswordForm.get('newPassword')?.invalid && resetPasswordForm.get('newPassword')?.touched" class="field-error">
        <span *ngIf="resetPasswordForm.get('newPassword')?.errors?.['required']">Password is required</span>
        <span *ngIf="resetPasswordForm.get('newPassword')?.errors?.['minlength']">Password must be at least 6 characters</span>
      </div>
    </div>
    
    <div>
      <label for="confirmPassword">Confirm Password</label>
      <input id="confirmPassword" formControlName="confirmPassword" type="password" placeholder="Confirm new password" />
      <div *ngIf="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched" class="field-error">
        <span *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['required']">Please confirm your password</span>
        <span *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['passwordMismatch']">Passwords do not match</span>
      </div>
    </div>
    
    <button type="submit" [disabled]="resetPasswordForm.invalid || loading">
      <span *ngIf="loading">Resetting...</span>
      <span *ngIf="!loading">Reset Password</span>
    </button>
    
    <div class="reset-password-links">
      <a (click)="goToLogin()" class="back-link">&lt; Back to Login</a>
    </div>
  </form>

  <div *ngIf="!validatingToken && !tokenValid" class="invalid-token">
    <h2>Invalid Reset Link</h2>
    <p>The password reset link is invalid or has expired.</p>
    <button (click)="goToLogin()" class="back-button">Back to Login</button>
  </div>
</div> 